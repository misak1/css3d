
<style>
  body {
    margin:0;
    padding:0;
    overflow: hidden;
  }
  .panel-wrapper {
    margin-top: 100px;
    transform-style: preserve-3d;
    perspective: 1000px;
    -webkit-perspective: 1000px;
    position: relative;
    /* margin: auto; */
  }
  .panel-wrapper img
   {
    width: 300px;
    height: 300px;
    backface-visibility: hidden;
    position: absolute;
    left: 50%;
    margin-left: -150px;
  }
  .reflect{
    -webkit-mask-image:-webkit-gradient(linear, left top, left bottom, from(rgba(0,0,0,0)), to(rgba(0,0,0,.2)))
  }
</style>
<script src='numeric-1.2.6.min.js'></script>
<script src="index.js"></script>
<div class="panel-wrapper">
  <!-- 一段目 -->
  <img src='img1.png' class='row1 panel1' />
  <img src='img1.png' class='row1 panel1 reflect' />
  <img src='img2.png' class='row1 panel2' />
  <img src='img2.png' class='row1 panel2 reflect' />
  <img src='img3.png' class='row1 panel3' />
  <img src='img3.png' class='row1 panel3 reflect' />
  <img src='img1.png' class='row1 panel4' />
  <img src='img1.png' class='row1 panel4 reflect' />
  <img src='img2.png' class='row1 panel5' />
  <img src='img2.png' class='row1 panel5 reflect' />

  <!-- 二段目 -->
  <img src='img1.png' class='row2 panel1' />
  <img src='img1.png' class='row2 panel1 reflect' />
  <img src='img2.png' class='row2 panel2' />
  <img src='img2.png' class='row2 panel2 reflect' />
  <img src='img3.png' class='row2 panel3' />
  <img src='img3.png' class='row2 panel3 reflect' />
  <img src='img1.png' class='row2 panel4' />
  <img src='img1.png' class='row2 panel4 reflect' />
  <img src='img2.png' class='row2 panel5' />
  <img src='img2.png' class='row2 panel5 reflect' />
</div>

<script>

  function initPosition(elm1, elm2, x, y){
    elm1.style.webkitTransform =
      `matrix3d(
        1,0,0,0,
        0,1,0,0,
        0,0,1,0,
        0,0,-1000,1)`;
    rotateElement(elm1, 0 + x, 0 + y, 0);
    // 鏡面用
    elm2.style.webkitTransform =
      `matrix3d(
        1,0,0,0,
        0,-1,0,0,
        0,0,1,0,
        0,0,-1000,1)`;
    rotateElement(elm2, 17 + x, 0 + y, 0);
  }
  // 一段目
  /* panel1 */
  var elm_row1_1 = document.querySelector('.row1.panel1');
  var elm_row1_1r = document.querySelector('.row1.panel1.reflect');
  var elm_row1_2 = document.querySelector('.row1.panel2');
  var elm_row1_2r = document.querySelector('.row1.panel2.reflect');
  var elm_row1_3 = document.querySelector('.row1.panel3');
  var elm_row1_3r = document.querySelector('.row1.panel3.reflect');
  var elm_row1_4 = document.querySelector('.row1.panel4');
  var elm_row1_4r = document.querySelector('.row1.panel4.reflect');
  var elm_row1_5 = document.querySelector('.row1.panel5');
  var elm_row1_5r = document.querySelector('.row1.panel5.reflect');

  // 二段目
  var elm_row2_1 = document.querySelector('.row2.panel1');
  var elm_row2_1r = document.querySelector('.row2.panel1.reflect');
  var elm_row2_2 = document.querySelector('.row2.panel2');
  var elm_row2_2r = document.querySelector('.row2.panel2.reflect');
  var elm_row2_3 = document.querySelector('.row2.panel3');
  var elm_row2_3r = document.querySelector('.row2.panel3.reflect');
  var elm_row2_4 = document.querySelector('.row2.panel4');
  var elm_row2_4r = document.querySelector('.row2.panel4.reflect');
  var elm_row2_5 = document.querySelector('.row2.panel5');
  var elm_row2_5r = document.querySelector('.row2.panel5.reflect');

  initPosition(elm_row1_1, elm_row1_1r, -10, -40);
  initPosition(elm_row1_2, elm_row1_2r, -10, -20);
  initPosition(elm_row1_3, elm_row1_3r, -10,  0);
  initPosition(elm_row1_4, elm_row1_4r, -10,  20);
  initPosition(elm_row1_5, elm_row1_5r, -10,  40);

  initPosition(elm_row2_1, elm_row2_1r, 10, -40);
  initPosition(elm_row2_2, elm_row2_2r, 10, -20);
  initPosition(elm_row2_3, elm_row2_3r, 10,  0);
  initPosition(elm_row2_4, elm_row2_4r, 10,  20);
  initPosition(elm_row2_5, elm_row2_5r, 10,  40);

  setInterval(function () {
    rotateElement(elm_row1_1, 1, 0, 0);
    rotateElement(elm_row1_1r,1, 0, 0);
    rotateElement(elm_row1_2, 0, 1, 0);
    rotateElement(elm_row1_2r,0, 1, 0);
    rotateElement(elm_row1_3, 0, 0, 1);
    rotateElement(elm_row1_3r,0, 0, 1);
    rotateElement(elm_row1_4, 1, 0, -1);
    rotateElement(elm_row1_4r,1, 0, -1);
    rotateElement(elm_row1_5, 1, 0, 1);
    rotateElement(elm_row1_5r,1, 0, 1);

  //   rotateElement(elm_row2_1, 0, -1, 0);
  //   rotateElement(elm_row2_1r,0, -1, 0);
  //   rotateElement(elm_row2_2, 0, -1, 0);
  //   rotateElement(elm_row2_2r,0, -1, 0);
  //   rotateElement(elm_row2_3, 0, -1, 0);
  //   rotateElement(elm_row2_3r,0, -1, 0);
  //   rotateElement(elm_row2_4, 0, -1, 0);
  //   rotateElement(elm_row2_4r,0, -1, 0);
  //   rotateElement(elm_row2_5, 0, -1, 0);
  //   rotateElement(elm_row2_5r,0, -1, 0);
  }, 10)
</script>
